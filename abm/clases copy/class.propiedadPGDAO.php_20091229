<?phpinclude_once("generic_class/class.PGDAO.php");/*	CREATE TABLE  `achaval`.`propiedad` (  `id_prop` int(10) unsigned NOT NULL auto_increment,  `id_zona` varchar(100) NOT NULL,  `id_loca` varchar(100) NOT NULL,  `calle` varchar(150) NOT NULL,  `entre1` varchar(150) NOT NULL,  `entre2` varchar(150) NOT NULL,  `nro` varchar(45) NOT NULL,  `descripcion` varchar(500) NOT NULL,  `id_tipo_prop` int(10) unsigned default NULL,  	private $intermediacion;	private $id_inmo;	private $operacion;intermediacion,id_inmo,operacion*///  id_prop,id_zona,id_loca,calle,entre1,entre2,nro,descripcion,id_tipo_propclass PropiedadPGDAO extends PGDAO {	protected $INSERT="INSERT INTO achaval.propiedad (id_zona,id_loca,calle,entre1,entre2,nro,descripcion,id_tipo_prop,intermediacion,id_inmo,operacion,comentario,video,piso,dpto,id_cliente,goglat,goglong) values ('#id_zona#','#id_loca#','#calle#','#entre1#','#entre2#','#nro#','#descripcion#',#id_tipo_prop#,'#intermediacion#',#id_inmo#,'#operacion#','#comentario#','#video#','#piso#','#dpto#',#id_cliente#,#goglat#,#goglong#)";	protected $DELETE="DELETE FROM achaval.propiedad WHERE id_prop=#id_prop#";	protected $UPDATE="UPDATE achaval.propiedad SET id_zona='#id_zona#',id_loca='#id_loca#',calle='#calle#',entre1='#entre1#',entre2='#entre2#',nro='#nro#',descripcion='#descripcion#',id_tipo_prop=#id_tipo_prop#,intermediacion='#intermediacion#',id_inmo=#id_inmo#,operacion='#operacion#',comentario='#comentario#',video='#video#',piso='#piso#',dpto='#dpto#',id_cliente=#id_cliente#,goglat=#goglat#,goglong=#goglong# WHERE id_prop=#id_prop# ";	protected $FINDBYID="SELECT id_prop,id_zona,id_loca,calle,entre1,entre2,nro,descripcion,id_tipo_prop,intermediacion,id_inmo,operacion,comentario,video,piso,dpto,id_cliente,goglat,goglong FROM achaval.propiedad WHERE id_prop=#id_prop#";	protected $FINDBYCLAVE="SELECT id_prop,id_zona,id_loca,calle,entre1,entre2,nro,descripcion,id_tipo_prop,intermediacion,id_inmo,operacion,comentario,video,piso,dpto,id_cliente,goglat,goglong							FROM achaval.propiedad							WHERE calle LIKE  '#calle#' and nro='#nro#' and piso like '#piso#' and dpto like '#dpto#'" ;		protected $COLECCION="SELECT id_prop,id_zona,id_loca,calle,entre1,entre2,nro,descripcion,id_tipo_prop,intermediacion,id_inmo,operacion,comentario,video,piso,dpto,id_cliente,goglat,goglong  FROM achaval.propiedad ORDER BY id_zona,id_loca,calle,nro";		protected $COLECCIONBASE="SELECT id_prop,id_zona,id_loca,calle,entre1,entre2,nro,descripcion,id_tipo_prop,intermediacion,id_inmo,operacion,comentario,video,piso,dpto,id_cliente,goglat,goglong  FROM achaval.propiedad ";	protected $ORDENBASE = " ORDER BY id_zona,id_loca,calle,nro";/*SELECT d.id_prop,d.id_zona,d.id_loca,d.calle,d.entre1,d.entre2,d.nro,d.descripcion,d.id_tipo_prop,d.intermediacion,d.id_inmo,c.operacion,d.comentario,d.video,d.piso,d.dpto  FROM achaval.propiedad as d INNER JOIN(SELECT a.id_prop,a.operacion FROM achaval.propiedad_operacion as a inner join(select id_prop,max(fecha) as maxfecha from achaval.propiedad_operacion group by id_prop) as bon a.id_prop=b.id_prop and a.fecha=b.maxfecha) as c on c.id_prop=d.id_prop where id_zona=5;*/	public function coleccionByFiltro($zona,$localidad,$tipo_prop,$operacion){		$parametro = func_get_args();		$FILTRO = array();		$where='';				if($zona!=0){			$FILTRO[]="id_zona='#id_zona#'";		}		if($localidad!=0){			$FILTRO[]="id_loca='#id_loca#'";		}		if($tipo_prop!=0){			$FILTRO[]="id_tipo_prop='#id_tipo_prop#'";		}		if($operacion!='Todas'){			$FILTRO[]="operacion='#operacion#'";		}		if(sizeof($FILTRO)>0){			for($x=0; $x < sizeof($FILTRO)-1;$x++){				$where.= ($FILTRO[$x] . " AND ");			}			$where = " WHERE ".$where.$FILTRO[$x];		}					//		print_r($parametro);		$resultado=$this->execSql($this->COLECCIONBASE.$where.$this->ORDENBASE,$parametro);		if (!$resultado){			$this->onError("COD_COLLECION","PROPIEDADES FILTRADAS");		}		return $resultado;	}} // Fin clase DAO?>